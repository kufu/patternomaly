<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Patternomaly with Chart.js Examples</title>

    <style>
      body {
        font-family: Helvetica, Arial, sans-serif;
        margin: 20px;
      }
      .chart-container {
        margin: 20px 0;
        max-width: 600px;
      }
      h3 {
        color: #333;
        border-bottom: 2px solid #eee;
        padding-bottom: 10px;
      }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0"></script>
  </head>
  <body onload="load();">
    <div class="chart-container">
      <h3>Multiple Dataset Bar Chart</h3>
      <canvas id="bar"></canvas>
    </div>

    <div class="chart-container">
      <h3>Doughnut (fixed patterns)</h3>
      <canvas id="doughnut"></canvas>
    </div>

    <div class="chart-container">
      <h3>Doughnut (auto-generated patterns)</h3>
      <canvas id="doughnut-auto"></canvas>
    </div>

    <div class="chart-container">
      <h3>Polar (fixed patterns)</h3>
      <canvas id="polar"></canvas>
    </div>

    <div class="chart-container">
      <h3>Multiple Dataset Bubble Chart (similar colors)</h3>
      <canvas id="bubble"></canvas>
    </div>

    <script src="./patternomaly.js" defer></script>
    <script>
      var load = function () {
        var barCanvas = document.getElementById("bar");
        var barContext = barCanvas.getContext("2d");

        var multipleDatasets = {
          datasets: [
            {
              data: [300, 50, 100, 210, 140, 56, 80, 260, 210, 130, 283],
              backgroundColor: pattern.draw("square", "#1f77b4"),
              label: "Person One",
            },
            {
              data: [423, 32, 156, 20, 292, 99, 70, 62, 256, 109, 426],
              backgroundColor: pattern.draw("disc", "#3366cc"),
              label: "Person Two",
              // hoverBackgroundColor: [chartContext.createPattern(highlightPatternCanvas, 'repeat'), '#5AD3D1', '#FFC870']
            },
          ],
          labels: [
            "One",
            "Two",
            "Three",
            "Four",
            "Five",
            "Six",
            "Seven",
            "Eight",
            "Nine",
            "Ten",
            "Eleven",
          ],
        };

        new Chart(barContext, {
          type: "bar",
          data: multipleDatasets,
          options: {
            responsive: true,
            plugins: {
              title: {
                display: true,
                text: "パターンを使った棒グラフ（色覚障害対応）",
              },
            },
            scales: {
              y: {
                beginAtZero: true,
                ticks: {
                  beginAtZero: true,
                },
              },
            },
          },
        });

        var doughnutCanvas = document.getElementById("doughnut");
        var doughnutContext = doughnutCanvas.getContext("2d");

        var singleDataset = {
          datasets: [
            {
              data: [300, 50, 100, 210, 140, 56, 80, 260, 210, 130, 283],
              backgroundColor: [
                pattern.draw("square", "#1f77b4"),
                pattern.draw("diagonal-right-left", "#e377c2"),
                pattern.draw("disc", "#ff7f0e"),
                pattern.draw("diamond", "#2ca02c"),
                pattern.draw("triangle-inverted", "#bcbd22"),
                pattern.draw("line", "#d62728"),
                pattern.draw("zigzag", "#17becf"),
                pattern.draw("line-vertical", "#9467bd"),
                pattern.draw("triangle", "#7f7f7f"),
                pattern.draw("diagonal", "#8c564b"),
                pattern.draw("zigzag-vertical", "#3366cc"),
              ],
            },
          ],
          labels: [
            "One1",
            "Two",
            "Three",
            "Four",
            "Five",
            "Six",
            "Seven",
            "Eight",
            "Nine",
            "Ten",
            "Eleven",
          ],
        };

        new Chart(doughnutContext, {
          type: "doughnut",
          data: singleDataset,
          options: {
            responsive: true,
            plugins: {
              title: {
                display: true,
                text: "パターンを使ったドーナツグラフ（固定パターン）",
              },
            },
          },
        });

        var doughnutAutoCanvas = document.getElementById("doughnut-auto");
        var doughnutAutoContext = doughnutAutoCanvas.getContext("2d");

        var singleAutoDataset = {
          datasets: [
            {
              data: [300, 50, 100, 210, 140, 56, 80, 260, 210, 130, 283],
              backgroundColor: pattern.generate([
                "#1f77b4",
                "#e377c2",
                "#ff7f0e",
                "#2ca02c",
                "#bcbd22",
                "#d62728",
                "#17becf",
                "#9467bd",
                "#7f7f7f",
                "#8c564b",
                "#3366cc",
              ]),
            },
          ],
          labels: [
            "One",
            "Two",
            "Three",
            "Four",
            "Five",
            "Six",
            "Seven",
            "Eight",
            "Nine",
            "Ten",
            "Eleven",
          ],
        };

        new Chart(doughnutAutoContext, {
          type: "doughnut",
          data: singleAutoDataset,
          options: {
            responsive: true,
            plugins: {
              title: {
                display: true,
                text: "パターンを使ったドーナツグラフ（自動生成パターン）",
              },
            },
          },
        });

        var polarCanvas = document.getElementById("polar");
        var polarContext = polarCanvas.getContext("2d");

        new Chart(polarContext, {
          type: "polarArea",
          data: singleDataset,
          options: {
            responsive: true,
            plugins: {
              title: {
                display: true,
                text: "パターンを使ったポーラーエリアチャート",
              },
            },
          },
        });

        var bubbleDatasets = {
          datasets: [
            {
              data: [
                { x: 300, y: 50, r: 21 },
                { x: 100, y: 45, r: 12 },
                { x: 210, y: 140, r: 27 },
                { x: 56, y: 80, r: 16 },
                { x: 260, y: 210, r: 10 },
                { x: 130, y: 283, r: 34 },
              ],
              backgroundColor: pattern.draw("square", "#1f77b4"),
              label: "Person One",
            },
            {
              data: [
                { x: 423, y: 32, r: 23 },
                { x: 156, y: 20, r: 10 },
                { x: 292, y: 99, r: 28 },
                { x: 70, y: 62, r: 15 },
                { x: 256, y: 109, r: 19 },
                { x: 426, y: 348, r: 21 },
              ],
              backgroundColor: pattern.draw("disc", "#3366cc"),
              label: "Person Two",
            },
          ],
          labels: [
            "One",
            "Two",
            "Three",
            "Four",
            "Five",
            "Six",
            "Seven",
            "Eight",
            "Nine",
            "Ten",
            "Eleven",
          ],
        };

        var bubbleCanvas = document.getElementById("bubble");
        var bubbleContext = bubbleCanvas.getContext("2d");

        new Chart(bubbleContext, {
          type: "bubble",
          data: bubbleDatasets,
          options: {
            responsive: true,
            plugins: {
              title: {
                display: true,
                text: "パターンを使ったバブルチャート（類似色での区別）",
              },
            },
            scales: {
              x: {
                beginAtZero: true,
              },
              y: {
                beginAtZero: true,
              },
            },
          },
        });
      };
    </script>
  </body>
</html>
